<?xml version="1.0"?>
<api>
	<description>
		<![CDATA[This is an API to interact with the PhotoPlacer db]]>
	</description>

	<command id='photo' security='public'>
		<description><![CDATA[This API lets you add and retrieve photos]]></description>
		
		<index>
			<description><![CDATA[Gets the global list of photos. Returns the list of photo ids sorted by newest first (largest photoid to smallest)]]></description>
			<action file='photos.php'><![CDATA[getAllPhotos($_GET['limit']);]]></action>
		</index>
		
		<get>
			<description><![CDATA[Interface to get info about a specific photo. Photo ID comes from photo/index or map.]]></description>
			<action file='photos.php'><![CDATA[getPhoto($_REST['photo']);]]></action>
		</get>
		
		<post>
			<description><![CDATA[API to upload a photo. Parameters are url, latitude, longitude, altitude, username, direction, comma-separated taglist]]></description>
			<action file='photos.php'><![CDATA[addPhoto($_POST['url'],$_POST['latitude'],$_POST['longitude'],$_POST['altitude'],$_POST['direction'],$_USER['uid']),$_POST['tags']);]]></action>
		</post>
		
		<put>
			<description><![CDATA[API to increment photo popularity]]></description>
			<action file='photos.php'><![CDATA[incrementPopularity($_REST['photo']);]]></action>
		</put>
	</command>
	
	<command id='map' security='public'>
		<description><![CDATA[This API lets you get popular locations on the map]]></description>
		
		<index>
			<description><![CDATA[This is how you can get a list of popular locations in the whole campus]]></description>
			<action file='map.php'><![CDATA[getTopLocations($_GET['limit']);]]></action>
		</index>
		
		<get>
			<description><![CDATA[Get a list of popular locations bounded by 2 sets of coordinates. 4 parameters are needed, the parameters are sw_lat, sw_lng, ne_lat, ne_lng]]></description>
			<action file='map.php'><![CDATA[getBoundLocation($_GET['sw_lat'], $_GET['sw_lng'], $_GET['ne_lat'], $_GET['ne_lng'], $_GET['limit']);]]></action>
		</get>
		
		<command id='zoom' security='public'>
			<description><![CDATA[This API lets you get zoomed locations on the map]]></description>
			
			<index>
				<description><![CDATA[Get a list of popular locations in the zoomed location]]></description>
				<action file='map.php'><![CDATA[getZoomedLocationsById($_REST['map']);]]></action>
			</index>
			
			<get>
				<description><![CDATA[Get a list of photos at a zoomed in location]]></description>
				<action file='map.php'><![CDATA[getPhotosAtZoomedLocation($_REST['map'],$_REST['map/zoom']);]]></action>
			</get>
			
		</command>
	</command>
	<!--<command id='wishlist' security='protected'>-->
	<command id='wishlist' security='public'>
		<description><![CDATA[This API lets you get, add and delete for a single users wishlist]]></description>
		
		<index>
			<description><![CDATA[Gets the wishlist of photos. Returns (photoid, w_id) for the logged in user]]></description>
			<action file='wishlist.php'><![CDATA[getWishlist('dlee399');]]></action>
			<!--<action file='wishlist.php'><![CDATA[getWishlist($_USER['uid']);]]></action>-->
		</index>
		
		<get>
			<description><![CDATA[Interface to get the photo details for a specific wishlist entry. Parameter w_id comes from the rest index. Returns (photoid, url, latitude, longitude, altitude, direction, timestamp, popularity, w_id) for the (logged in user, w_id) pair]]></description>
			<action file='wishlist.php'><![CDATA[getWishlistEntry('dlee399', $_REST['wishlist']);]]></action>
			<!--<action file='wishlist.php'><![CDATA[getWishlistEntry($_USER['uid'], $_REST['wishlist']);]]></action>-->
		</get>
		
		<post>
			<description><![CDATA[API to add a photo to the users wishlist. Parameter is the photoid to add. Result is the number of rows affected (0 indicates error)]]></description>
			<action file='wishlist.php'><![CDATA[addWishlistEntry($_USER['uid'], $_POST['photoid']);]]></action>
		</post>
		
		<delete>
			<description><![CDATA[API to delete a photo from the users wishlist. Parameter w_id comes from the rest index. Result is the number of rows affected (0 indicates error)]]></description>
			<action file='wishlist.php'><![CDATA[deleteWishlistEntry($_USER['uid'], $_REST['wishlist']);]]></action>
		</delete>
	</command>
	
</api>
